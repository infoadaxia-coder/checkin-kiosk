<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>宿泊者名簿登録 / Guest Registration</title>
    <style>
        body { font-family: "Helvetica Neue", Arial, sans-serif; background-color: #f0ebf8; margin: 0; padding: 20px; color: #202124; line-height: 1.6; }
        .form-container { max-width: 640px; margin: 0 auto; }
        .header-card { background: white; border-top: 8px solid #673ab7; border-radius: 8px; padding: 24px; margin-bottom: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .question-card { background: white; border-radius: 8px; padding: 24px; margin-bottom: 12px; border: 1px solid #dadce0; }
        .label { font-weight: bold; display: block; margin-bottom: 8px; font-size: 16px; }
        .sub-label { font-size: 13px; color: #5f6368; margin-bottom: 10px; }
        input[type="text"], input[type="email"], input[type="tel"], input[type="number"], textarea, select { 
            width: 100%; padding: 10px; border: none; border-bottom: 1px solid #dadce0; font-size: 16px; box-sizing: border-box; outline: none; background: #fafafa;
        }
        input:focus { border-bottom: 2px solid #673ab7; background: #fff; }
        .terms-box { height: 200px; overflow-y: scroll; border: 1px solid #dadce0; padding: 15px; font-size: 12px; background: #fff; margin-bottom: 10px; white-space: pre-wrap; }
        .submit-btn { background-color: #673ab7; color: white; padding: 12px 30px; border: none; border-radius: 4px; font-size: 16px; cursor: pointer; font-weight: bold; width: 100%; }
        .required { color: #d93025; }
    </style>
</head>
<body>
    <div class="form-container">
        <div class="header-card">
            <h1>宿泊者名簿への登録</h1>
            <p>Registration Form (Inns and Hotels Act)</p>
        </div>

        <form id="mainForm">
            <div class="question-card">
                <span class="label">規約への同意 / Agreement <span class="required">*</span></span>
                <div class="terms-box">
【宿泊約款】
（第1条〜第21条の全文をここに記載）
【ペット同伴規約】
（第1条〜第11条の全文をここに記載）
※前回の回答でいただいたテキストをここに貼り付けてください。
                </div>
                <label><input type="checkbox" id="agree" required> 規約に同意します / I agree to the terms.</label>
            </div>

            <div class="question-card">
                <label class="label">代表者氏名 / Representative Name <span class="required">*</span></label>
                <input type="text" id="name" required placeholder="山田 太郎 / Taro Yamada">
            </div>

            <div class="question-card">
                <label class="label">代表者住所 / Address <span class="required">*</span></label>
                <div class="sub-label">日本在住の方は現住所、外国籍の方は本国住所</div>
                <input type="text" id="address" required>
            </div>

            <div class="question-card">
                <label class="label">電話番号 / Phone Number <span class="required">*</span></label>
                <input type="tel" id="tel" required>
            </div>

            <div class="question-card">
                <label class="label">メールアドレス / Email <span class="required">*</span></label>
                <input type="email" id="email" required>
            </div>

            <div class="question-card">
                <label class="label">宿泊人数 / Number of Guests <span class="required">*</span></label>
                <input type="number" id="guestCount" required min="1">
            </div>

            <div class="question-card">
                <label class="label">全員の氏名・年齢 / Names and Ages of all guests <span class="required">*</span></label>
                <textarea id="allGuestInfo" rows="4" required placeholder="1. 山田太郎 (35), 2. 山田花子 (32)..."></textarea>
            </div>

            <div class="question-card" style="background-color: #f8f9fa;">
                <label class="label">【外国籍の方のみ】国籍・パスポート番号 / Nationality & Passport Number</label>
                <input type="text" id="nationality" placeholder="Nationality & Passport No.">
            </div>

            <div class="question-card">
                <label class="label">前泊地 / Previous Stop</label>
                <input type="text" id="prevPlace">
            </div>
            <div class="question-card">
                <label class="label">次泊地 / Next Destination</label>
                <input type="text" id="nextPlace">
            </div>

            <div class="question-card">
                <label class="label">身分証・ワクチン証明の添付 / ID or Vaccination Photo <span class="required">*</span></label>
                <div class="sub-label">日本在住者：身分証 / 外国籍：パスポート / ペット同伴：ワクチン証明</div>
                <input type="file" id="fileInput" accept="image/*" required>
            </div>

            <div class="question-card">
                <label class="label">備考 / Remarks</label>
                <textarea id="details" rows="3"></textarea>
            </div>

            <button type="submit" class="submit-btn" id="submitBtn">送信して完了 / Submit</button>
        </form>
    </div>

    <script>
        const gasUrl = "★ここにGASのURLを貼り付け★";
        const redirectUrl = "https://infoadaxia-coder.github.io/checkin-kiosk/thanks.html";

        document.getElementById('mainForm').onsubmit = async (e) => {
            e.preventDefault();
            const btn = document.getElementById('submitBtn');
            btn.disabled = true;
            btn.innerText = "送信中...";

            const file = document.getElementById('fileInput').files[0];
            let fileData = null;
            if (file) {
                fileData = await new Promise(resolve => {
                    const reader = new FileReader();
                    reader.onload = e => resolve(e.target.result);
                    reader.readAsDataURL(file);
                });
            }

            const payload = {
                name: document.getElementById('name').value,
                address: document.getElementById('address').value,
                tel: document.getElementById('tel').value,
                email: document.getElementById('email').value,
                guestCount: document.getElementById('guestCount').value,
                allGuestInfo: document.getElementById('allGuestInfo').value,
                nationality: document.getElementById('nationality').value,
                prevPlace: document.getElementById('prevPlace').value,
                nextPlace: document.getElementById('nextPlace').value,
                details: document.getElementById('details').value,
                fileData: fileData,
                fileName: file ? file.name : ""
            };

            const response = await fetch(gasUrl, { method: "POST", body: JSON.stringify(payload) });
            const result = await response.json();
            if (result.result === "success") window.location.href = redirectUrl;
        };
    </script>
</body>
</html>
